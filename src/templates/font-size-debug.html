<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Font Size Debug Test</title>
    <style>
        :root {
            --font-size-org: 12px;
            --font-size-name: 10px;
            --font-size-role: 9px;
            --org-box-width: 85px;
            --org-box-height: 100px;
            --org-spacing-x: 120px;
            --org-spacing-y: 140px;
        }

        .test-container {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
        }

        .org-box {
            position: relative;
            width: var(--org-box-width);
            height: var(--org-box-height);
            border: 2px solid #333;
            background: #f9f9f9;
            border-radius: 4px;
            font-size: var(--font-size-org);
            display: flex;
            flex-direction: column;
            margin: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .org-header {
            background: #4a5568;
            color: white;
            padding: 3px 4px;
            font-weight: bold;
            font-size: var(--font-size-org);
            text-align: center;
            border-radius: 2px 2px 0 0;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .org-content {
            padding: 4px 3px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            gap: 1px;
        }

        .org-manager-role {
            font-size: var(--font-size-role);
            font-weight: normal;
            text-align: left;
            color: #2d3748;
            margin-bottom: 1px;
        }

        .org-manager {
            font-size: var(--font-size-name);
            font-weight: bold;
            text-align: center;
            margin-bottom: 2px;
            color: #2d3748;
        }

        .controls {
            margin: 20px;
        }

        .controls select {
            margin: 10px;
            padding: 5px;
            font-size: 14px;
        }

        .debug-info {
            margin: 20px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Font Size Debug Test</h1>
    
    <div class="controls">
        <label for="fontSizeSelect">Font Size:</label>
        <select id="fontSizeSelect">
            <option value="small">Small</option>
            <option value="medium" selected>Medium</option>
            <option value="large">Large</option>
        </select>
        
        <label for="boxSizeSelect">Box Size:</label>
        <select id="boxSizeSelect">
            <option value="small">Small</option>
            <option value="medium" selected>Medium</option>
            <option value="large">Large</option>
        </select>
        
        <button id="updateBtn">Update Styles</button>
        <button id="debugBtn">Show Debug Info</button>
    </div>

    <div class="test-container">
        <div class="org-box">
            <div class="org-header">YKK IDN</div>
            <div class="org-content">
                <div class="org-manager-role">President</div>
                <div class="org-manager">Suzuki Taro</div>
            </div>
        </div>

        <div class="org-box">
            <div class="org-header">Production</div>
            <div class="org-content">
                <div class="org-manager-role">Factory manager</div>
                <div class="org-manager">Arita Jiro</div>
            </div>
        </div>
    </div>

    <div id="debugInfo" class="debug-info"></div>

    <script>
        // Configuration matching the main app
        const CONFIG = {
            DEFAULTS: {
                FONT_SIZES: {
                    small: { org: '10px', name: '8px', role: '7px' },
                    medium: { org: '12px', name: '10px', role: '9px' },
                    large: { org: '14px', name: '12px', role: '11px' }
                },
                BOX_SIZES: {
                    small: { width: '70px', height: '80px', spacingX: '95px', spacingY: '110px' },
                    medium: { width: '85px', height: '100px', spacingX: '120px', spacingY: '140px' },
                    large: { width: '100px', height: '120px', spacingX: '145px', spacingY: '170px' }
                }
            }
        };

        const ConfigUtils = {
            updateCSSVariables(variables) {
                const root = document.documentElement;
                Object.entries(variables).forEach(([key, value]) => {
                    console.log(`Setting CSS variable --${key}: ${value}`);
                    root.style.setProperty(`--${key}`, value);
                });
            },
            
            debugLog(message, category = 'general') {
                console.log(`[${category.toUpperCase()}] ${message}`);
            }
        };

        function updateStyles() {
            const fontSize = document.getElementById('fontSizeSelect').value;
            const boxSize = document.getElementById('boxSizeSelect').value;
            
            console.log(`Updating styles: fontSize=${fontSize}, boxSize=${boxSize}`);
            
            const fonts = CONFIG.DEFAULTS.FONT_SIZES[fontSize];
            const sizes = CONFIG.DEFAULTS.BOX_SIZES[boxSize];
            
            if (!fonts || !sizes) {
                console.error('Invalid font or box size selection');
                return;
            }
            
            ConfigUtils.updateCSSVariables({
                'font-size-org': fonts.org,
                'font-size-name': fonts.name,
                'font-size-role': fonts.role,
                'org-box-width': sizes.width,
                'org-box-height': sizes.height,
                'org-spacing-x': sizes.spacingX,
                'org-spacing-y': sizes.spacingY
            });
            
            console.log('CSS variables updated successfully');
        }

        function showDebugInfo() {
            const root = document.documentElement;
            const computedStyle = getComputedStyle(root);
            
            const debugInfo = {
                'CSS Variables': {
                    '--font-size-org': computedStyle.getPropertyValue('--font-size-org'),
                    '--font-size-name': computedStyle.getPropertyValue('--font-size-name'),
                    '--font-size-role': computedStyle.getPropertyValue('--font-size-role'),
                    '--org-box-width': computedStyle.getPropertyValue('--org-box-width'),
                    '--org-box-height': computedStyle.getPropertyValue('--org-box-height')
                },
                'Computed Styles on Elements': {}
            };
            
            // Check computed styles on actual elements
            const orgBoxes = document.querySelectorAll('.org-box');
            orgBoxes.forEach((box, index) => {
                const boxStyle = getComputedStyle(box);
                const header = box.querySelector('.org-header');
                const manager = box.querySelector('.org-manager');
                const role = box.querySelector('.org-manager-role');
                
                debugInfo['Computed Styles on Elements'][`Box ${index + 1}`] = {
                    'box width': boxStyle.width,
                    'box height': boxStyle.height,
                    'header font-size': header ? getComputedStyle(header).fontSize : 'N/A',
                    'manager font-size': manager ? getComputedStyle(manager).fontSize : 'N/A',
                    'role font-size': role ? getComputedStyle(role).fontSize : 'N/A'
                };
            });
            
            document.getElementById('debugInfo').innerHTML = 
                '<h3>Debug Information:</h3><pre>' + 
                JSON.stringify(debugInfo, null, 2) + 
                '</pre>';
        }

        // Event listeners
        document.getElementById('updateBtn').addEventListener('click', updateStyles);
        document.getElementById('debugBtn').addEventListener('click', showDebugInfo);
        document.getElementById('fontSizeSelect').addEventListener('change', updateStyles);
        document.getElementById('boxSizeSelect').addEventListener('change', updateStyles);

        // Initial debug info
        showDebugInfo();
    </script>
</body>
</html>