<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Language Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        .language-selector {
            margin: 20px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
        }
        button {
            margin: 5px;
            padding: 8px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1 data-i18n="title">Organization Chart Tool</h1>
    <p data-i18n="subtitle">Automatically generate organization charts from Excel files</p>
    
    <div class="language-selector">
        <label data-i18n="languageLabel">Language:</label>
        <button onclick="changeLanguage('en')">English</button>
        <button onclick="changeLanguage('ja')">Êó•Êú¨Ë™û</button>
        <button onclick="changeLanguage('id')">Bahasa Indonesia</button>
    </div>
    
    <div class="test-section">
        <div class="test-title">Basic UI Elements</div>
        <p><span data-i18n="baseOrganization">Base Organization:</span> <span data-i18n="showAll">Show All</span></p>
        <p><span data-i18n="levelLimit">Level Limit:</span> <span data-i18n="noLimit">No Limit</span></p>
        <p><span data-i18n="fontSize">Font Size:</span> <span data-i18n="medium">Medium</span></p>
        <p><span data-i18n="boxSize">Box Size:</span> <span data-i18n="large">Large</span></p>
    </div>
    
    <div class="test-section">
        <div class="test-title">Buttons</div>
        <button data-i18n="generateChart">Generate Chart</button>
        <button data-i18n="showDataTable">Show/Edit Data Table</button>
        <button data-i18n="validateData">Validate Data</button>
        <button data-i18n="exportSVG">Export SVG</button>
        <button data-i18n="exportPNG">Export PNG</button>
    </div>
    
    <div class="test-section">
        <div class="test-title">Table Headers</div>
        <ul>
            <li data-i18n="tableHeaders.actions">Actions</li>
            <li data-i18n="tableHeaders.level">Level</li>
            <li data-i18n="tableHeaders.name">Name</li>
            <li data-i18n="tableHeaders.role">Role</li>
            <li data-i18n="tableHeaders.status">Status</li>
        </ul>
    </div>
    
    <div class="test-section">
        <div class="test-title">Dynamic Parameters</div>
        <p data-i18n="levelsUpTo" data-i18n-params='{"n":5}'>Up to 5 levels</p>
        <p data-i18n="fileLoadComplete" data-i18n-params='{"filename":"test.xlsx"}'>File "test.xlsx" loaded successfully.</p>
    </div>
    
    <div class="test-section">
        <div class="test-title">HTML Content</div>
        <p data-i18n-html="usage">üí° <strong>Usage:</strong> 1Ô∏è‚É£ Select file ‚Üí 2Ô∏è‚É£ Validate data ‚Üí 3Ô∏è‚É£ Generate chart ‚Üí 4Ô∏è‚É£ Export</p>
    </div>
    
    <div class="test-section">
        <div class="test-title">Current Language Info</div>
        <p>Current Language: <span id="currentLang">en</span></p>
        <p>Available Languages: <span id="availableLangs">Loading...</span></p>
    </div>

    <!-- Load the language system -->
    <script src="js/config.js"></script>
    
    <script>
        // Initialize language system
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof LanguageManager !== 'undefined') {
                // Don't create the default language selector since we have our own
                LanguageManager.updatePageContent();
                updateLanguageInfo();
                console.log('Language system test initialized');
            } else {
                console.error('LanguageManager not found');
            }
        });
        
        // Function to change language
        function changeLanguage(langCode) {
            if (typeof LanguageManager !== 'undefined') {
                LanguageManager.setLanguage(langCode);
                updateLanguageInfo();
                console.log('Language changed to:', langCode);
            } else {
                console.error('LanguageManager not available');
            }
        }
        
        // Update language info display
        function updateLanguageInfo() {
            if (typeof LanguageManager !== 'undefined') {
                document.getElementById('currentLang').textContent = LanguageManager.getCurrentLanguage();
                const availableLangs = Object.entries(LanguageManager.getAvailableLanguages())
                    .map(([code, name]) => `${code}: ${name}`)
                    .join(', ');
                document.getElementById('availableLangs').textContent = availableLangs;
            }
        }
        
        // Listen for language change events
        document.addEventListener('languageChanged', function(event) {
            console.log('Language changed event received:', event.detail.language);
            updateLanguageInfo();
        });
        
        // Test translation function directly
        window.testTranslation = function() {
            if (typeof t === 'function') {
                console.log('Testing translation function:');
                console.log('t("title"):', t('title'));
                console.log('t("levelsUpTo", {n: 3}):', t('levelsUpTo', {n: 3}));
                console.log('t("fileLoadComplete", {filename: "sample.xlsx"}):', t('fileLoadComplete', {filename: 'sample.xlsx'}));
            } else {
                console.error('Translation function not available');
            }
        };
        
        // Add test button
        const testButton = document.createElement('button');
        testButton.textContent = 'Test Translation Function';
        testButton.onclick = window.testTranslation;
        testButton.style.cssText = 'position: fixed; top: 10px; right: 10px; z-index: 1000;';
        document.body.appendChild(testButton);
    </script>
</body>
</html>